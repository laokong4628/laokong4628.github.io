# 硬件测试相关


## Getting started

<!-- {.-three-column} -->
### 一. PCBA测试
<!--more-->
<!-- {.-prime} -->
> #### **1.ICT**
> ICT是`In-Circuit Tester`的简写，它是一种利用电脑技术，在大批量生产的电子产品生产线上，测试电路板上元器件是否正确及其参数、电路便装配是否正确的测试仪器。由于它不是模拟测试电路的功能、性能，所以也叫其为电路板的静态测试。

> `ICT的结构`由`电脑`{电脑部分就是一台`普通的PC机`[**CPU, 主板, 显卡, 内存, 硬盘, 电源, 机箱, 机箱风扇, cpu风扇散热（水冷，风冷）**]，`用其windows操作系统完成与测试软件的接口`和在`显示器上显示、打印、统计`等功能}, `测试电路`{`测试电路`分`控制电路`和`开关电路`。**控制电路**是控制对相应的**元器件测试其参数**。电阻测试其阻值，电容测试其容量，电感测其电感量等。**开关电路**是接通需测试的**相应元器件**，由`继电器或CMOS半导体开关`组成。}、`测试压板`{当**压板**上的塑料棒压住电路板往下压一段距离时，针床上测试针受到压缩力而良好地使**测试点与测试电路连接**，也就是**被测元器件接入与测试电路**。}及`针床`{`测试用针床`是用于`接通`ICT和被测电路板的一块工装板。工装板上根据电路板上的每一测试点的位置安装了一根测试针，测试针是带弹性可伸缩的，被测电路板压在针床上时，测试针和针床以及连接电缆，把电路板上每一个测试点连接到测试电路上。}和`显示器`、`机械传动`{`机械传动`部分包括`气动压板`、`行程开关`等机构。ICT是用压缩空气通过`汽缸将压板压下、升上的`。行程开关是当压板下压到`指定的位置`时该开关断开气路，压板停止下压动作。}等部分组成。`软件部分`是`Windows操作系统`和`ICT测试软件`。  

> `ICT的结构`如下：
|      `ICT的结构`      |      `具体结构`      |        `详细介绍`         |
| -------------------------- | -------------------------- | ------------------------ |
|  `电脑`  |  **CPU, 主板, 显卡, 内存, 硬盘, 电源, 机箱, 机箱风扇, cpu风扇散热（水冷，风冷， 显示器）**  |      **用于windows操作系统完成与测试软件的接口和在显示器上显示、打印、统计等功能**      |
|  `测试电路`       |  **控制电路， 开关电路**       |      **控制电路是控制对相应的元器件测试其参数， 开关电路是接通需测试的相应元器件。**     |
|  `机械传动`       |  **气缸， 气动压板， 行程开关， 光电感应器**       |      **ICT是用压缩空气通过汽缸将压板压下、升上的。行程开关是当压板下压到指定的位置时该开关断开气路，压板停止下压动作。**      |
|  `测试压板`       |  **压板**       |      **当压板上的塑料棒压住电路板往下压一段距离时，针床上测试针受到压缩力而良好地使测试点与测试电路连接，也就是被测元器件接入与测试电路。**      |
|  `针床`       |  **针床**       |      **用于接通ICT和被测电路板的一块工装板**      |
<!-- {.-shortcuts} -->

> `ICT的特征`如下：
```markdown
`最大测试点数`：表示设备最多能设多少个测试点。一般电阻、电容等元件只有两条引脚，每个元件只用两个测试点就够了。ICT有多个引脚，每条引脚都需要设一个测试点。元件越多，电路板越复杂，需要测试点越多。因此，测试仪需要足够多的测试点数。目前ICT的最大测试点数可达`2048`点，已足够用了。
`可测试的元器件种类`：测试开、短路，电阻、电容、电感、二极管， 三极管、稳压管、光耦、IC等多种元器件。
`测试速度`：测试一块电路板的最少时间。测试速度与电路板的复杂程度有关。
`测试范围`：电阻的测试范围：一般0.05Ω～40MΩ；电容的测试范围：一般1pF～40000μF；电感的测试范围：一般1μH～40H；测试电压一般为0～10V；测试电流一般为1μA～80mA；频率一般为1Hz～100KHz。
`电路板尺寸`：最大的电路板尺寸一般为460×350mm。
`电阻测试`：R=U/I。
`电容测试`：小电容的测试方法与电阻类似，不过是用交流信号，利用XC=U/I 同时，XC=1/(ωC) 而得C=I/(Uω)=I/(2πfU)F是测试频率，U、I是测试信号的电压和电流有效值。大容量的电容测试用DC方法，即用直流电压加在电容两端，充电流随时间或指数减少的规律，在测试时加一定的延时时间就可测出其容量。
`电感测试`：电感的测试方法和电容的测试类似，只用交流信号测试。
`二极管测试`：二极管正向测试时，加一正向电流在二极管上，二极管的正向压降为0.7V(硅材料管)，加一反向电流在二极管上，二极管压降会很大。
`三极管测试`：先测试bc极和be极之间的正向压降，这和二极管的测试方法相同。再测试三极管的放大作用：在be极加一基极电流，测试ce极之间的电压。例如：b、e极加1mA电流时，c、e之间的电压由原来2V降到0.5V，则三极管处于正常的放大工作状态。
`跳线测试`：跳线是跨接印制板做连线用的，只有通断两种情况。测试其电阻阻值就可以判断好坏。测试方法和测试电阻是相同的。
`IC测试`：一般地讲，对IC只测试其引脚是否会有连焊、虚焊的情况，至于IC内部性能如何是无法测试出来的。测试方法是将IC的各引脚对电源VCC引脚的正反向电压测试一遍，再将各引脚对IC接地端GND引脚的正反向电压测试一遍。与正常值进行比较，有不正常的可以判断该引脚连焊或虚焊。

```
> `ICT測試不良及常見故障的分析方法`如下：
|      ICT測試不良      |         分析         |         原因         |         说明         |
| -------------------------- | ------------------------ | ------------------------ | ------------------------ |
|  `开路不良`  |      **所谓开路不良就是指在某一个短路群中，各个测试点之间本来应该是短路，但却出现了某个测试点对其所在短路群的其它测试点是开路的。**      |         **(1)PCB Open；(2)零件造成的{A．立件与漏件；B．空焊；C．零件不良};(3)测试点有问题{A．探针未接触到；B．测试点氧化；C．测试点有东西挡住；D．测试点在防焊区}**         |         **在平常出现比较多的情况是立件于漏件，空焊，PCB Open和零件不良。对于立件和漏件可以通过目检查出；PCB Open只要细心查看两测试点之间的线路，看在测试点之间是否有断线的情况发生，零件不良造成的开路不良通常是由于电阻，电感等零件损坏而造成的其本体开路。如果将一块好的PCB板与之比较发现没有差异（通常比较的是电阻），则表明测试点有问题，需检查PCB板上的测试点是否有问题或检查治具上的测试针是否有问题。**         |
|  `短路不良`  |      **所谓短路不良是指存在于不同的短路群中的测试点在正常情况下应该是开路的，但却出现了短路的情况。**      |         **(1)零件短路（由于在零件两端存在有锡丝而造成短路）；(2)零零件不良，本体短路（通常是由于零件损坏了的缘故）;(3)PCB短路（存在比较多的情况是：出现短路不良的两个测试点的步线十分靠近，由于印刷的原因在某处出现了短路，尤其是在印有字迹的地方要特别注意，绝大部分多数的PCB短路都发生在这里。；（4）BGA短路（可能是BGA下方的锡球短路，也有可能是BGA本体短路），这比较麻烦，必须有90%以上的把握时才能拆BGA。**         |         **对于零件短路可以通过重新焊过该零件当可解决短路不良的情况，对于零件本体短路可以通过更换零件来加以解决；对于PCB短路应首先注意测试点之间的走线，在可能出现短路的地方（尤其是在有字迹遮住的地方）在没有找到其它原因的情况下最好用笔刀割一下，在进行这个操作的时候必须很小心，不要将步线刮断了而造成新的开路不良。如果是BGA内部短路而又必须拆下来的话，就应该先验证出是否为BGA零件不良，如果是零件不良则应该换上一个OK的BGA，注意一块PCBA板的BGA拆换次数不能超过3次，否则会因为PCB板局部受热次数过多而使PCB板发生变形。**         |
|  `零件不良`  |      **所谓零件不良是指在ICT测试时，显示“Open Fail”在零件不良打印报表中其量测值往往与该零件的标准值不一致，而存在一定的偏移，这种偏移有时很大，有时很小。**      |         **(A)M-V：9999.99 Dev：+999.9%{（1）空焊;（2）漏件；（3）PCB开路;（4）测试点有问题：a．针未接触到；b．测试点氧化；c．测试点有东西挡住；d．测试点在防焊区}；(B)如果测试值与标准值比较只是发生了较大的偏移，而不是量测值为无穷大的情况{（1）错件；（2）有内阻的被动组件的影响；（3）测试点有问题};(C)如果量测值与标准值比较只是发生了很小的偏移，这种情况多为零件误差引起的，但是为了准确起见，最好还是通过比较的方法看是否真的是由于误差的原因而造成的量测值偏移，如果由于误差的原因造成的话，需由工程人员作相应的程序调整。；（D）在进行了上面几步后就应该检查测试点（包括高测试点和低测试点）在检查测试点的过程中可能会发现{(1）PCB开路（大约占10% 的比例）；（2）测试点有为题：a．未接触到；b．测试点氧化；c．测试点有东西挡住；d．测试点在防焊区}**         |         **A:对于测试点出现的问题首先应该查看测试点是否有氧化，测试点是否在防焊区，然后查看测试治具上对应的测试针是否为未接触到测试点或是由于测试点有东西挡住，至于其它的原因，在前面已有详细的阐述，这里便不再重复了。B:如果是电容错件，有两种方法进行量测：第一种方法是拆下来量测，但这种方法通常是用来量测大电容的，而且在量测之前必须知道它的容值，对于小电容无法准确量出，因为电容被焊接的关系，它的容值会发生改变；第二种方法是通过比较的方法直接在PCB板上进行量测，但必须注意所要比较PCB板应该是一块好的板子，并且注意到在量测时要保持测试笔的方向一致（即红、黑表笔所对应的电容两端应该一致）。这种方法也只能用来测量大电容。C:??。D：PCB开路应该进行分段量测；PCB短路有10%测不出，这可能是因为没有测试点或者是由于将10欧以下的电阻判断为短路了。在IC开路测试不良中，会出现电压值偏大的情况，出现这种情况的原因绝大部分部分在于PCB开路或存在有空焊。通过量测会发现，在电压偏大的两测试点之间的阻抗值偏大，为了查找出现这种情况的原因，最简便直接的方法就是同一块好的PCB板进行对比量测，有必要时可以将容易拆下来的零件拆下来加以验证，如果出现在BGA内部的话，就一定要加以验证，可以选择在PCB板正面进行线路切割（应以不要将PCB割坏为原则），然后在进行量测试，以确保的确是由于BGA内部空焊所造成的。**         |
<!-- {.-shortcuts} -->  
> #### `常见ICT设备`  
> `捷智300` / `德律tr510`  
> #### `测试程式界面` 
|  零件  |  max  |  min  |  actual  |  loc  |
| ------|-------|-------|-------|
|  R(电阻)/压敏电阻(RT)/C(电容)/U&Q&N(光藕)/U&N(IC)/二极管,发光二极管(D,VD )/三极管,可控硅(V,VT)/蜂鸣器(B,BZ)/轻触开关(S)/继电器(J)/保险丝(F)/接插件(J)/变压器(B,T) |  4  |  1  |  2  |  C1  |

> #### **2.FCT**  
> `FCT`英文全称为：`FunctionalCircuitTest`，即`功能测试`，一般专指`PCBA上电后`的`功能测试`，包括：`电压`、`电流`、`功率`、`功率因素`、`频率`、`占空比`、`位置测定`、`LED亮度与颜色识别`、`LCD字符和颜色识别`、`声音识别`、`温度测量与控制`、`压力测量与控制`、`精密微量运动控制`、`FLASH和EEPROM在线烧录`等`功能参数`的测量。它指的是针对`测试目标板`(`UUT：UnitUnderTest`)提供模拟的运行环境(激励和负载)，使其工作于各种设计状态，从而获取各个`状态的参数`来验证`UUT的功能`好坏的测试方法。简单地说，`就是对UUT加载合适的激励和负载`，测量其`输出端响应`是`否满足设计要求`。
> FCT（功能测试）它指的是对测试目标板(UUT：Unit Under Test)提供模拟的运行环境, 使其工作于该环境下，从而获取到各个状态的参数来验证UUT的功能好坏的测试方法。  
> #### `功能测试系统的构成`  
> 1.`系统控制中心`：这部分一般是**PC、MCU、ARM等小型或者中型的中央处理器组成，它主要作用是控制整个测试过程的进程，并对每一步的测试内容进行判断和记录，最终得出测试结果。**它是整个测试系统的`核心大脑`。  
> 2.`控制执行部分`：控制执行部分主要由`I/O部件`组成，它是测试过程`逻辑动作的感应`和`执行机构`。系统通过它来搭建各种`测试环境`，实现`测试功能`。  
> 3.`参数测量部分`：测量部分主要由一些测量用的`板卡、仪表`组成。它主要可以完成测试过程中`各种模拟或者数字量的采集`工作。所以有时我们又称其为`数据采集部分`。  
> 4.`数据处理和输出部分`：每一步以及最终的测试结果，才是我们整个测试的目的。如何把这些**结果和数据存储、输出**，更方便于我们对`PCBA产品质量`进行有效控制，这就是`数据处理`和`输出部分的职责`。  
> #### `常见FCT设备`  
> `Siton FCT-750` / 

> #### **3.AOI**  
> `AOI（Automated Optical Inspection缩写）`的中文全称是`自动光学检测`，是基于`光学原理`来对`焊接生产中遇到的常见缺陷`进行检测的设备。AOI是新兴起的一种新型测试技术，但发展迅速，很多厂家都推出了AOI测试设备。当自动检测时，机器通过摄像头自动扫描PCB，采集图像，测试的焊点与数据库中的合格的参数进行比较，经过图像处理，检查出PCB上缺陷，并通过显示器或自动标志把缺陷显示/标示出来，供维修人员修整。运用高速高精度视觉处理技术自动检测PCB板上各种不同贴装错误及焊接缺陷。PCB板的范围可从细间距高密度板到低密度大尺寸板，并可提供在线检测方案，以提高生产效率，及焊接质量。通过使用AOI作为减少缺陷的工具，在装配工艺过程的早期查找和消除错误，以实现良好的过程控制。早期发现缺陷将避免将坏板送到随后的装配阶段，AOI将减少修理成本将避免报废不可修理的电路板。
> `错误类型`:
|      阶段      |         问题         |
| -------------------------- | ------------------------ |
|  `刷锡后贴片前`  |      **桥接-移位-无锡-锡不足**      |
|  `贴片后回流焊前`  |      **移位，漏料、极性、歪斜、脚弯、错件**      |
|  `回流焊或波峰焊后`  |      **少锡/多锡、无锡短接 锡球 漏料-极性-移位脚弯错件**      |
|  `PCB行业裸板检测`  |      **ALL**      |

> `AOI优点`：
> `AOI软件`中有一个综合性的验证功能，它能减少检查的误报，保证检测程序无缺陷。它可以检查储存起来的有缺陷的样品，例如，修理站存放的样品，以及印刷了焊膏的空白印刷电路板。在优化阶段，在这方面花时间的原因是为了不让任何缺陷溜过去。所有已知的缺陷都必须检查，同时要把允许出现的误报数量做到最小。在针对减少误报而对任何程序进行调整时，要检查一下，看看以前检查出来的真正缺陷，是否得到维修站的证实。通过综合的核实，保证检查程序的质量，用于专门的制造和核查，同时对误报进行追踪。减少不良，提高良率，较少生产时间和成本。  
> `AOI不足`：
> AOI只是用来减少目检的工作量，还不能够完全取代人工目检。软体设计还不够完整，例如：AOI无法明确区别出电极针痕、刮痧和污染。初期程式设计建立产品档比较耗时。线路和功能问题无法检测。

> #### **4.FVT**  
> FVT（`Function Verification Test`）`功能检验测试`，是印刷电路板测试的一种专业名称。其目的是为了抓出组装不良的板子，透过模拟电路板实装成整机时的全功能测试，以期抓出在组装成整机以前把所可能有瑕疵的电路组装板抓出来，免得组装成整机后才发现不良，还要全部拆掉重组造成工时浪费以及材料的损失。

> #### `光藕简介`
> `光耦合器`（`opticalcoupler equipment`，英文缩写为`OCEP`）亦称`光电隔离器`或`光电耦合器`，`简称光耦`。它是`以光为媒介`来`传输电信号`的`器件`，通常把`发光`器（红外线发光二极管LED）与`受光器`（光敏半导体管，光敏电阻）封装在同一管壳内。当输入端加电信号时发光器发出光线，受光器接收光线之后就产生光电流，从输出端流出，从而实现了`“电—光—电”`控制。以光为媒介把输入端信号耦合到输出端的光电耦合器，由于它具有体积小、寿命长、无触点，抗干扰能力强，输出和输入之间绝缘，单向传输信号等优点，在数字电路上获得广泛的应用。 
> #### `光藕分类`
> 光耦分类:非线性光耦和线性光耦。
> 非线性光耦：适合于开关信号的传输（高低电平），不适合于传输模拟量。实际中常用。
> 线性光耦：以线性特性进行隔离控制。  
> #### `光藕图示`
> ![光藕图示](/images/opticalcoupler.jpg "光藕图示")

> #### `三极管简介`
> 三极管，全称应为`半导体三极管`，也称`双极型晶体管`、`晶体三极管`，是一种控制电流的`半导体器件`。其作用是把微弱信号放大成幅度值较大的电信号，也用作无触点开关。三极管是半导体基本元器件之一，具有电流放大作用，是电子电路的核心元件。三极管是在一块半导体基片上制作两个相距很近的PN结，两个PN结把整块半导体分成三部分，`中间部分`是`基区`，`两侧部分`是`发射区`和`集电区`，排列方式有`PNP和NPN`两种。  
> #### `光藕分类`
> `晶体三极管`（以下简称三极管）按`材料`分有两种：`锗管`和`硅管`。而每一种又有`NPN和PNP`两种`结构形式`，但使用最多的是`硅NPN和锗PNP`两种三极管，（其中，N是负极的意思（代表英文中Negative），N型半导体在高纯度硅中加入磷取代一些硅原子，在电压刺激下产生自由电子导电，而P是正极的意思（Positive）是加入硼取代硅，产生大量空穴利于导电）。两者除了电源极性不同外，其工作原理都是相同的。
> #### `三极管工作原理`
> **PNP型三极管工作流程图和NPN相比有以下相同和不同之处：**  
> PNP三极管的工作原理和NPN三极管是一样的，只是偏压方向，电流方向均相反，电子和空穴的角色互换。PNP三极管是利用Veb控制由射区经基区，入射到集电区的正电子，而NPN三极管则是利用Vbe加控制由射区经基区、入射到集电区的负电子。  
> ![PNP/NPN型三极管相同和不同之处](/images/NPN&PNP_DIFF.png "PNP/NPN型三极管相同和不同之处")  

```markdown
1、 NPN集电极电流产生为lbe，PNP集电极电流产生为leb。
2、 NPN发射区发射负电子，PNP发射区发射正电子。
3、 NPN集电区收集负电子，PNP集电区收集正电子。
4、 NPN电流方向为lce，PNP电流方向为lec。

```  

> #### `PNP/NPN型三极管结构图示`
> ![PNP/NPN型三极管结构](/images/NPN&PNP.png "PNP/NPN型三极管结构")  
> #### `PNP/NPN型三极管工作原理图示`  
> ![PNP/NPN型三极管工作原理](/images/NPN&PNP_theory.png "PNP/NPN型三极管工作原理")  
> `NPN三极管`：**Vb<Ve （截止状态）; Vc>Vb>Ve（放大状态）; Vb>Ve Vb>Vc （饱和状态）;**  
> `PNP三级管`：**Vb>Ve （截止状态）; Vc<Vb<Ve（放大状态）; Vb<Ve Vb<Vc（饱和状态）;**
> `“V”代表是电压。`   
> ![PNP/NPN型三极管工作原理](/images/NPN&PNP_theory.png "PNP/NPN型三极管工作原理")  
> 正电子-空穴；负电子-自由电子  
> `在图的左边`，当NPN三极管b极没有电压输入时，c极与e极之间没有电流通过。c极与e之间关闭，三极管处于截止状态。  
> `在图的右边`，当NPN三极管b极输入一个正电压，由于电子作用，e极N区负电子被b极P区正电子吸引出来涌向（扩散）到基区，因为基区做的很薄，所以只有一部分负电子与正电子碰撞（复合）产生基极电流，另一部分负电子则在集电结附近聚集，由于电场作用聚集在集电结的负电子穿过（漂移）集电结，到达集电区后与聚集在c极（N型半导体端）正电子碰撞产生集电极电流  
> 从此可见，基极电流越大，集电极电流越大，即集电极输入一个小的电流，集电极就可得到一个大的电流，三极管此刻处于放大状态。`注意`：当基极电流到达一定程度，集电极电流不再升高。这时三极管失去电流放大作用，集电极和发射极之间的电压很小，集电极和发射极之间相当于开关的导通状态，此刻三极管处于饱和状态。  







