<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>AJAX 网络联系基本操作</h1>
    <div id="list"></div>
    <script>
        // let data={"name":"laokong"}; //物件
        let data='{"name":"laokong"}'; //字串
        console.log(data);
        data=JSON.parse(data); //将字符串资料转换成物件
        console.log(data);

        // 先显示Loading的信息
        let list=document.getElementById("list");
        list.innerHTML="... loading ...";
        // 透过Ajax fetch API 连线到远端的网址，抓取资料
        /*
            fetch(网址).then(function(response)) {
                // Response 物件，代表伺服器的意思
            }
        */
        let src="https://blog.csdn.net/menlinshuangxi/article/details/7979504";
        fetch(src).then(function(response) {
            console.log(response); //确认是否有回应
            // return response.text(); //用字符串的形式取回资料
            return response.json(); //将资料诠释成：数组
        }).then(function(response) {
            // console.log("最终的资料", result.toUpperCase()); //字串的形式
            console.log("最终的资料", result);
            list.innerHTML="";
            let product;
            for (let i = 0; i < result.length; i++) {
                product = result[i];
                console.log(product);
                list.innerHTML+=product.name.bold()+" - "+product.price+"<hr/>";
                sum+=product.price;
            }
            let avg=sum/result.length;
            list.innerHTML+="平均售价： "+avg;

        });
    </script>
</body>
</html>
